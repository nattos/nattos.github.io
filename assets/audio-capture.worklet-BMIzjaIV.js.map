{"version":3,"file":"audio-capture.worklet-BMIzjaIV.js","sources":["../src/beatsync/audio-capture.worklet.ts"],"sourcesContent":["class AudioCaptureProcessor extends AudioWorkletProcessor {\n  private processingPort: MessagePort | null = null;\n\n  constructor() {\n    super();\n    this.port.onmessage = (event) => {\n      if (event.data.type === 'init') {\n        this.processingPort = event.data.port;\n      }\n    };\n  }\n\n  process(inputs: Float32Array[][], outputs: Float32Array[][], parameters: Record<string, Float32Array>): boolean {\n    if (!this.processingPort) return true;\n\n    const input = inputs[0];\n    if (input && input.length > 0) {\n      const channels: Float32Array[] = [];\n      const transferList: Transferable[] = [];\n\n      for (let i = 0; i < input.length; i++) {\n        const channel = new Float32Array(input[i]);\n        channels.push(channel);\n        transferList.push(channel.buffer);\n      }\n\n      this.processingPort.postMessage({\n        type: 'audio',\n        payload: {\n          buffer: channels,\n          currentTime: currentTime,\n          sampleRate: sampleRate\n        }\n      }, transferList);\n    }\n\n    return true;\n  }\n}\n\nregisterProcessor('audio-capture-processor', AudioCaptureProcessor);\n"],"names":["AudioCaptureProcessor","event","inputs","outputs","parameters","input","channels","transferList","i","channel"],"mappings":"yBAAA,MAAMA,UAA8B,qBAAsB,CAGxD,aAAc,CACZ,MAAA,EAHF,KAAQ,eAAqC,KAI3C,KAAK,KAAK,UAAaC,GAAU,CAC3BA,EAAM,KAAK,OAAS,SACtB,KAAK,eAAiBA,EAAM,KAAK,KAErC,CACF,CAEA,QAAQC,EAA0BC,EAA2BC,EAAmD,CAC9G,GAAI,CAAC,KAAK,eAAgB,MAAO,GAEjC,MAAMC,EAAQH,EAAO,CAAC,EACtB,GAAIG,GAASA,EAAM,OAAS,EAAG,CAC7B,MAAMC,EAA2B,CAAA,EAC3BC,EAA+B,CAAA,EAErC,QAASC,EAAI,EAAGA,EAAIH,EAAM,OAAQG,IAAK,CACrC,MAAMC,EAAU,IAAI,aAAaJ,EAAMG,CAAC,CAAC,EACzCF,EAAS,KAAKG,CAAO,EACrBF,EAAa,KAAKE,EAAQ,MAAM,CAClC,CAEA,KAAK,eAAe,YAAY,CAC9B,KAAM,QACN,QAAS,CACP,OAAQH,EACR,YACA,UAAA,CACF,EACCC,CAAY,CACjB,CAEA,MAAO,EACT,CACF,CAEA,kBAAkB,0BAA2BP,CAAqB"}