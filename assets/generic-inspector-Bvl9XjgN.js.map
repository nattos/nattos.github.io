{"version":3,"file":"generic-inspector-Bvl9XjgN.js","sources":["../../src/views/ui-option-bar.ts","../../src/views/inspector/generic-inspector.ts"],"sourcesContent":["import { LitElement, html, css } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\n\n@customElement('ui-option-bar')\nexport class UiOptionBar extends LitElement {\n  @property({ type: String }) value = '';\n  @property({ type: Array }) options: { label: string; value: string }[] = [];\n  @property({ type: Boolean }) disabled = false;\n\n  static readonly styles = css`\n    :host {\n      display: inline-flex;\n      background-color: rgba(0, 0, 0, 0.2);\n      border: 1px solid var(--border-color);\n      border-radius: 4px;\n      padding: 2px;\n      gap: 2px;\n      user-select: none;\n    }\n\n    .option {\n      flex: 1;\n      text-align: center;\n      padding: 4px 12px;\n      font-size: 11px;\n      cursor: pointer;\n      border-radius: 2px;\n      color: var(--text-muted);\n      transition: all 0.1s ease-out;\n      border: 1px solid transparent;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      white-space: nowrap;\n    }\n\n    .option:hover:not(.active):not(.disabled) {\n      background-color: var(--button-hover);\n      color: var(--text-color);\n    }\n\n    .option.active {\n      background-color: var(--selection-color);\n      border-color: var(--selection-border);\n      color: var(--text-color);\n      text-shadow: 0 0 2px rgba(255, 255, 255, 0.2);\n      font-weight: 500;\n    }\n\n    .option.disabled {\n      opacity: 0.4;\n      cursor: not-allowed;\n    }\n  `;\n\n  private select(option: string) {\n    if (this.disabled) return;\n    if (this.value !== option) {\n      this.value = option;\n      this.dispatchEvent(new CustomEvent('change', {\n        detail: { value: option },\n        bubbles: true,\n        composed: true\n      }));\n    }\n  }\n\n  render() {\n    return html`\n      ${this.options.map(opt => html`\n        <div\n          class=\"option ${this.value === opt.value ? 'active' : ''} ${this.disabled ? 'disabled' : ''}\"\n          @click=${() => this.select(opt.value)}\n        >\n          ${opt.label}\n        </div>\n      `)}\n    `;\n  }\n}\n","import { html, TemplateResult } from 'lit';\nimport { GridNode } from '../../builder/state';\nimport { InspectorChangeHandler, defaultNodeRepository } from '../../structor/repository';\nimport { ROW_HEIGHT } from '../../constants';\nimport { InspectorFieldDef } from '../../structor/node-helpers';\n\nconst getValue = (node: GridNode, path: string, fallback: any) => {\n  // 1. Try config value\n  const val = node.config?.[path];\n  if (val !== undefined) return val;\n\n  // 2. Try input definition defaultValue\n  const nodeType = defaultNodeRepository.getNodeType(node.config.typeId);\n  if (nodeType && nodeType.inputs) {\n    const input = nodeType.inputs.find(i => i.name === path);\n    if (input && input.defaultValue !== undefined) {\n      return input.defaultValue;\n    }\n  }\n\n  // 3. Fallback\n  return fallback;\n};\n\nconst renderStringField = (node: GridNode, field: Extract<InspectorFieldDef, { type: 'string' }>, onchange: InspectorChangeHandler) => html`\n  <div class=\"field\" style=\"height: ${ROW_HEIGHT}px; display: flex; align-items: center; justify-content: space-between;\">\n    <label style=\"color: var(--text-muted); font-size: 0.7em;\">${field.label}</label>\n    <input\n      type=\"text\"\n      .value=${getValue(node, field.path, '')}\n      placeholder=${field.placeholder || ''}\n      @input=${(e: Event) => onchange({ [field.path]: (e.target as HTMLInputElement).value })}\n      style=\"background: var(--input-bg); border: 1px solid var(--border-color); color: var(--text-color); border-radius: 4px; padding: 2px 4px; width: 120px; font-size: 0.8em;\"\n    />\n  </div>\n`;\n\nconst renderNumberField = (node: GridNode, field: Extract<InspectorFieldDef, { type: 'number' }>, onchange: InspectorChangeHandler) => html`\n  <div class=\"field\" style=\"height: ${ROW_HEIGHT}px; display: flex; align-items: center; justify-content: space-between;\">\n    <label style=\"color: var(--text-muted); font-size: 0.7em;\">${field.label}</label>\n    <input\n      type=\"number\"\n      .value=${getValue(node, field.path, 0)}\n      min=${field.min}\n      max=${field.max}\n      step=${field.step}\n      @input=${(e: Event) => onchange({ [field.path]: parseFloat((e.target as HTMLInputElement).value) })}\n      style=\"background: var(--input-bg); border: 1px solid var(--border-color); color: var(--text-color); border-radius: 4px; padding: 2px 4px; width: 60px; font-size: 0.8em;\"\n    />\n  </div>\n`;\n\nimport '../../views/scalar-slider';\n\nconst renderSliderField = (node: GridNode, field: Extract<InspectorFieldDef, { type: 'slider' }>, onchange: InspectorChangeHandler) => html`\n  <div class=\"field\" style=\"height: ${ROW_HEIGHT}px; display: flex; align-items: center; justify-content: space-between;\">\n    <label style=\"color: var(--text-muted); font-size: 0.7em;\">${field.label}</label>\n    <div style=\"flex: 1; margin-left: 8px; max-width: 120px;\">\n      <scalar-slider\n        .value=${getValue(node, field.path, field.min)}\n        .min=${field.min}\n        .max=${field.max}\n        .step=${field.step || 0.01}\n        @change=${(e: CustomEvent) => onchange({ [field.path]: e.detail })}\n        style=\"width: 100%;\"\n      ></scalar-slider>\n    </div>\n  </div>\n`;\n\nconst renderBooleanField = (node: GridNode, field: Extract<InspectorFieldDef, { type: 'boolean' }>, onchange: InspectorChangeHandler) => html`\n  <div class=\"field\" style=\"height: ${ROW_HEIGHT}px; display: flex; align-items: center; justify-content: space-between;\">\n    <label style=\"color: var(--text-muted); font-size: 0.7em;\">${field.label}</label>\n    <input\n      type=\"checkbox\"\n      .checked=${getValue(node, field.path, false)}\n      @change=${(e: Event) => onchange({ [field.path]: (e.target as HTMLInputElement).checked })}\n    />\n  </div>\n`;\n\nconst renderSelectField = (node: GridNode, field: Extract<InspectorFieldDef, { type: 'select' }>, onchange: InspectorChangeHandler) => html`\n  <div class=\"field\" style=\"height: ${ROW_HEIGHT}px; display: flex; align-items: center; justify-content: space-between;\">\n    <label style=\"color: var(--text-muted); font-size: 0.7em;\">${field.label}</label>\n    <select\n      .value=${getValue(node, field.path, field.options[0]?.value)}\n      @change=${(e: Event) => onchange({ [field.path]: (e.target as HTMLSelectElement).value })}\n      style=\"background: var(--input-bg); border: 1px solid var(--border-color); color: var(--text-color); border-radius: 4px; padding: 2px 4px; font-size: 0.8em;\"\n    >\n      ${field.options.map(opt => html`<option value=${opt.value}>${opt.label}</option>`)}\n    </select>\n  </div>\n`;\n\nimport '../../views/ui-option-bar';\n\nconst renderTabBarField = (node: GridNode, field: Extract<InspectorFieldDef, { type: 'tab-bar' }>, onchange: InspectorChangeHandler) => html`\n  <div class=\"field\" style=\"height: ${ROW_HEIGHT}px; display: flex; align-items: center; justify-content: space-between;\">\n    <label style=\"color: var(--text-muted); font-size: 0.7em;\">${field.label}</label>\n    <div style=\"flex: 1; margin-left: 8px;\">\n      <ui-option-bar\n        .value=${getValue(node, field.path, field.options[0]?.value)}\n        .options=${field.options}\n        @change=${(e: CustomEvent) => onchange({ [field.path]: e.detail.value })}\n      ></ui-option-bar>\n    </div>\n  </div>\n`;\n\nexport const createGenericInspector = (fields: InspectorFieldDef[]) => {\n  return (node: GridNode, onchange: InspectorChangeHandler): TemplateResult => {\n    return html`\n      <div class=\"generic-inspector\" style=\"display: flex; flex-direction: column;\">\n        ${fields.map(field => {\n          switch (field.type) {\n            case 'string': return renderStringField(node, field, onchange);\n            case 'number': return renderNumberField(node, field, onchange);\n            case 'slider': return renderSliderField(node, field, onchange);\n            case 'boolean': return renderBooleanField(node, field, onchange);\n            case 'select': return renderSelectField(node, field, onchange);\n            case 'tab-bar': return renderTabBarField(node, field, onchange);\n            default: return html``;\n          }\n        })}\n      </div>\n    `;\n  };\n};\n"],"names":["UiOptionBar","LitElement","option","html","opt","css","__decorateClass","property","customElement","getValue","node","path","fallback","val","nodeType","defaultNodeRepository","input","i","renderStringField","field","onchange","ROW_HEIGHT","e","renderNumberField","renderSliderField","renderBooleanField","renderSelectField","renderTabBarField","createGenericInspector","fields"],"mappings":"kRAIO,IAAMA,EAAN,cAA0BC,CAAW,CAArC,aAAA,CAAA,MAAA,GAAA,SAAA,EACuB,KAAA,MAAQ,GACT,KAAA,QAA8C,CAAA,EAC5C,KAAA,SAAW,EAAA,CAgDhC,OAAOC,EAAgB,CACzB,KAAK,UACL,KAAK,QAAUA,IACjB,KAAK,MAAQA,EACb,KAAK,cAAc,IAAI,YAAY,SAAU,CAC3C,OAAQ,CAAE,MAAOA,CAAA,EACjB,QAAS,GACT,SAAU,EAAA,CACX,CAAC,EAEN,CAEA,QAAS,CACP,OAAOC;AAAAA,QACH,KAAK,QAAQ,IAAIC,GAAOD;AAAAA;AAAAA,0BAEN,KAAK,QAAUC,EAAI,MAAQ,SAAW,EAAE,IAAI,KAAK,SAAW,WAAa,EAAE;AAAA,mBAClF,IAAM,KAAK,OAAOA,EAAI,KAAK,CAAC;AAAA;AAAA,YAEnCA,EAAI,KAAK;AAAA;AAAA,OAEd,CAAC;AAAA,KAEN,CACF,EA3EaJ,EAKK,OAASK;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,IAJGC,EAAA,CAA3BC,EAAS,CAAE,KAAM,MAAA,CAAQ,CAAA,EADfP,EACiB,UAAA,QAAA,CAAA,EACDM,EAAA,CAA1BC,EAAS,CAAE,KAAM,KAAA,CAAO,CAAA,EAFdP,EAEgB,UAAA,UAAA,CAAA,EACEM,EAAA,CAA5BC,EAAS,CAAE,KAAM,OAAA,CAAS,CAAA,EAHhBP,EAGkB,UAAA,WAAA,CAAA,EAHlBA,EAANM,EAAA,CADNE,EAAc,eAAe,CAAA,EACjBR,CAAA,ECEb,MAAMS,EAAW,CAACC,EAAgBC,EAAcC,IAAkB,CAEhE,MAAMC,EAAMH,EAAK,SAASC,CAAI,EAC9B,GAAIE,IAAQ,OAAW,OAAOA,EAG9B,MAAMC,EAAWC,EAAsB,YAAYL,EAAK,OAAO,MAAM,EACrE,GAAII,GAAYA,EAAS,OAAQ,CAC/B,MAAME,EAAQF,EAAS,OAAO,KAAKG,GAAKA,EAAE,OAASN,CAAI,EACvD,GAAIK,GAASA,EAAM,eAAiB,OAClC,OAAOA,EAAM,YAEjB,CAGA,OAAOJ,CACT,EAEMM,EAAoB,CAACR,EAAgBS,EAAuDC,IAAqCjB;AAAAA,sCACjGkB,CAAU;AAAA,iEACiBF,EAAM,KAAK;AAAA;AAAA;AAAA,eAG7DV,EAASC,EAAMS,EAAM,KAAM,EAAE,CAAC;AAAA,oBACzBA,EAAM,aAAe,EAAE;AAAA,eAC3BG,GAAaF,EAAS,CAAE,CAACD,EAAM,IAAI,EAAIG,EAAE,OAA4B,MAAO,CAAC;AAAA;AAAA;AAAA;AAAA,EAMvFC,EAAoB,CAACb,EAAgBS,EAAuDC,IAAqCjB;AAAAA,sCACjGkB,CAAU;AAAA,iEACiBF,EAAM,KAAK;AAAA;AAAA;AAAA,eAG7DV,EAASC,EAAMS,EAAM,KAAM,CAAC,CAAC;AAAA,YAChCA,EAAM,GAAG;AAAA,YACTA,EAAM,GAAG;AAAA,aACRA,EAAM,IAAI;AAAA,eACPG,GAAaF,EAAS,CAAE,CAACD,EAAM,IAAI,EAAG,WAAYG,EAAE,OAA4B,KAAK,CAAA,CAAG,CAAC;AAAA;AAAA;AAAA;AAAA,EAQnGE,EAAoB,CAACd,EAAgBS,EAAuDC,IAAqCjB;AAAAA,sCACjGkB,CAAU;AAAA,iEACiBF,EAAM,KAAK;AAAA;AAAA;AAAA,iBAG3DV,EAASC,EAAMS,EAAM,KAAMA,EAAM,GAAG,CAAC;AAAA,eACvCA,EAAM,GAAG;AAAA,eACTA,EAAM,GAAG;AAAA,gBACRA,EAAM,MAAQ,GAAI;AAAA,kBACfG,GAAmBF,EAAS,CAAE,CAACD,EAAM,IAAI,EAAGG,EAAE,OAAQ,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,EAOpEG,EAAqB,CAACf,EAAgBS,EAAwDC,IAAqCjB;AAAAA,sCACnGkB,CAAU;AAAA,iEACiBF,EAAM,KAAK;AAAA;AAAA;AAAA,iBAG3DV,EAASC,EAAMS,EAAM,KAAM,EAAK,CAAC;AAAA,gBACjCG,GAAaF,EAAS,CAAE,CAACD,EAAM,IAAI,EAAIG,EAAE,OAA4B,QAAS,CAAC;AAAA;AAAA;AAAA,EAK1FI,EAAoB,CAAChB,EAAgBS,EAAuDC,IAAqCjB;AAAAA,sCACjGkB,CAAU;AAAA,iEACiBF,EAAM,KAAK;AAAA;AAAA,eAE7DV,EAASC,EAAMS,EAAM,KAAMA,EAAM,QAAQ,CAAC,GAAG,KAAK,CAAC;AAAA,gBACjDG,GAAaF,EAAS,CAAE,CAACD,EAAM,IAAI,EAAIG,EAAE,OAA6B,MAAO,CAAC;AAAA;AAAA;AAAA,QAGvFH,EAAM,QAAQ,IAAIf,GAAOD,kBAAqBC,EAAI,KAAK,IAAIA,EAAI,KAAK,WAAW,CAAC;AAAA;AAAA;AAAA,EAOlFuB,EAAoB,CAACjB,EAAgBS,EAAwDC,IAAqCjB;AAAAA,sCAClGkB,CAAU;AAAA,iEACiBF,EAAM,KAAK;AAAA;AAAA;AAAA,iBAG3DV,EAASC,EAAMS,EAAM,KAAMA,EAAM,QAAQ,CAAC,GAAG,KAAK,CAAC;AAAA,mBACjDA,EAAM,OAAO;AAAA,kBACbG,GAAmBF,EAAS,CAAE,CAACD,EAAM,IAAI,EAAGG,EAAE,OAAO,MAAO,CAAC;AAAA;AAAA;AAAA;AAAA,EAMnEM,EAA0BC,GAC9B,CAACnB,EAAgBU,IACfjB;AAAAA;AAAAA,UAED0B,EAAO,IAAIV,GAAS,CACpB,OAAQA,EAAM,KAAA,CACZ,IAAK,SAAU,OAAOD,EAAkBR,EAAMS,EAAOC,CAAQ,EAC7D,IAAK,SAAU,OAAOG,EAAkBb,EAAMS,EAAOC,CAAQ,EAC7D,IAAK,SAAU,OAAOI,EAAkBd,EAAMS,EAAOC,CAAQ,EAC7D,IAAK,UAAW,OAAOK,EAAmBf,EAAMS,EAAOC,CAAQ,EAC/D,IAAK,SAAU,OAAOM,EAAkBhB,EAAMS,EAAOC,CAAQ,EAC7D,IAAK,UAAW,OAAOO,EAAkBjB,EAAMS,EAAOC,CAAQ,EAC9D,QAAS,OAAOjB,GAAA,CAEpB,CAAC,CAAC;AAAA;"}