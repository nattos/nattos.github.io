{"version":3,"file":"nodes.ui-CmLW_Xcs.js","sources":["../../src/customnodes/midi/nodes.ui.ts"],"sourcesContent":["import { LitElement, html, css } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { GridNode } from '../../builder/state';\nimport { GraphNodeRenderHandlers } from '../../structor/repository';\nimport { MobxLitElement } from '../../views/mobx-lit-element';\nimport { appController } from '../../builder/controllers';\n\n@customElement('midi-trigger-renderer')\nexport class MidiTriggerRenderer extends MobxLitElement {\n  @property({ attribute: false }) node!: GridNode;\n  @property({ attribute: false }) handlers!: GraphNodeRenderHandlers;\n\n  static styles = css`\n    :host {\n      display: block;\n      width: 100%;\n      height: 100%;\n      padding: 4px;\n      box-sizing: border-box;\n    }\n\n    button {\n      width: 100%;\n      height: 100%;\n      background: #2a2a2a;\n      border: 1px solid #444;\n      border-radius: 4px;\n      color: #ccc;\n      font-family: inherit;\n      font-size: 11px;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n\n    button:hover {\n      background: #3a3a3a;\n      border-color: #666;\n      color: #fff;\n    }\n\n    button:active {\n      background: #666;\n      transform: translateY(1px);\n    }\n\n    .trigger-btn {\n        background: rgba(255, 255, 255, 0.05);\n        border: 1px solid rgba(255, 255, 255, 0.1);\n    }\n    .trigger-btn:hover {\n        background: rgba(255, 255, 255, 0.1);\n        border-color: rgba(255, 255, 255, 0.3);\n    }\n    .trigger-btn:active {\n        background: rgba(255, 255, 255, 0.2);\n    }\n  `;\n\n  private handlePointerDown(e: Event) {\n    e.stopPropagation();\n    // Update 'trigger' value in config to signal execution\n    // We import appController dynamically or assume global availability if needed,\n    // but better to import it since we are in main thread context.\n    const currentValues = this.node.config.values || {};\n    // Toggle or randomize to ensure change detected\n    const newVal = (currentValues.trigger || 0) + 1;\n\n    appController.setNodeConfig(this.node.id, {\n      values: { ...currentValues, trigger: newVal }\n    }, { skipHistory: true });\n  }\n\n  render() {\n    return html`\n      <button class=\"trigger-btn\"\n        @pointerdown=${this.handlePointerDown}\n        @dblclick=${(e: Event) => e.stopPropagation()}\n      >\n        TRIGGER\n      </button>\n    `;\n  }\n}\n\n\nexport const MidiTriggerBodyRenderer = (node: GridNode, handlers: GraphNodeRenderHandlers) => {\n  return html`<midi-trigger-renderer .node=${node} .handlers=${handlers}></midi-trigger-renderer>`;\n};\n\nexport const MidiTriggerBodyHeight = (node: GridNode) => 48;\n"],"names":["MidiTriggerRenderer","MobxLitElement","e","currentValues","newVal","appController","html","css","__decorateClass","property","customElement","MidiTriggerBodyRenderer","node","handlers","MidiTriggerBodyHeight"],"mappings":"2QAQO,IAAMA,EAAN,cAAkCC,CAAe,CAoD9C,kBAAkBC,EAAU,CAClCA,EAAE,gBAAA,EAIF,MAAMC,EAAgB,KAAK,KAAK,OAAO,QAAU,CAAA,EAE3CC,GAAUD,EAAc,SAAW,GAAK,EAE9CE,EAAc,cAAc,KAAK,KAAK,GAAI,CACxC,OAAQ,CAAE,GAAGF,EAAe,QAASC,CAAA,CAAO,EAC3C,CAAE,YAAa,GAAM,CAC1B,CAEA,QAAS,CACP,OAAOE;AAAAA;AAAAA,uBAEY,KAAK,iBAAiB;AAAA,oBACxBJ,GAAaA,EAAE,gBAAA,CAAiB;AAAA;AAAA;AAAA;AAAA,KAKnD,CACF,EA5EaF,EAIJ,OAASO;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA;AAAAA,IAHgBC,EAAA,CAA/BC,EAAS,CAAE,UAAW,EAAA,CAAO,CAAA,EADnBT,EACqB,UAAA,OAAA,CAAA,EACAQ,EAAA,CAA/BC,EAAS,CAAE,UAAW,EAAA,CAAO,CAAA,EAFnBT,EAEqB,UAAA,WAAA,CAAA,EAFrBA,EAANQ,EAAA,CADNE,EAAc,uBAAuB,CAAA,EACzBV,CAAA,EA+EN,MAAMW,EAA0B,CAACC,EAAgBC,IAC/CP,iCAAoCM,CAAI,cAAcC,CAAQ,4BAG1DC,EAAyBF,GAAmB"}